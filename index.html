<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>sunkissed com ‚Äî checkout</title>
  <script src="https://js.stripe.com/v3/"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=AcXVrBMJRow03VVLxTl2d0OPDapv4PtizxelcC1gGmejPyihTcNBm6gAzfPaZ51c5JuSAzoGotXzrANE&currency=EUR&disable-funding=card"></script>
  <style>
body {
  margin: 0;
  font-family: "Inter", sans-serif;
  background: #f1f5f9;
  display: flex;
  justify-content: center;
  min-height: 100vh;
  color: #334155;
}
.container {
  display: flex;
  max-width: 800px;
  width: 95%;
  background: #fff;
  margin: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  overflow: hidden;
  flex-wrap: wrap;
}
.checkout {
  flex: 1;
  padding: 24px;
}
.sidebar {
  width: 320px;
  background: #f9fafb;
  padding: 24px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  border-left: 1px solid #e2e8f0;
}
.logo {
  max-width: 120px;
  margin-bottom: 16px;
}
.product-name {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 8px;
}
.product-desc {
  font-size: 13px;
  margin-bottom: 16px;
}
.promo-section {
  margin-top: 16px;
  font-size: 14px;
}
.promo-section input {
  width: 100%;
  padding: 8px;
  font-size: 14px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  margin-top: 6px;
  margin-bottom: 6px;
  background: #f9fafb;
}
.promo-section button {
  padding: 8px 12px;
  background: #c2d6f6;
  color: #ffffff;
  border: 1px solid #c2d6f6;
  font-size: 13px;
  border-radius: 6px;
  cursor: pointer;
  margin-right: 4px;
  transition: all 0.2s ease;
}
.promo-section button:hover {
  transform: translateY(-2px);
  background: #eef2ff;
}
.promo-message {
  margin-top: 6px;
  font-size: 13px;
}
.tip-section {
  margin-top: 16px;
  padding: 12px;
  background: #ffffff;
  border-radius: 8px;
  border: 1px solid #c2d6f6;
  box-shadow: 0 2px 8px rgba(67,56,202,0.1);
  transition: transform 0.2s ease;
}
.tip-section:hover {
  transform: translateY(-2px);
}
.tip-section label {
  font-weight: 700;
  font-size: 14px;
  margin-bottom: 8px;
  display: block;
}
.tip-buttons {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.tip-buttons button {
  padding: 8px 12px;
  background: #c2d6f6;
  color: #ffffff;
  border: 1px solid #c2d6f6;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  transition: all 0.2s ease;
}
.tip-buttons button:hover {
  background: #eef2ff;
  transform: translateY(-2px);
}
.tip-buttons button.active {
  background: #b2cbf2;
  color: #fff;
  border-color: #b2cbf2;
}
.total-price {
  margin-top: 12px;
  font-size: 15px;
  font-weight: 600;
}
h1 {
  text-align: center;
  margin-bottom: 16px;
}
label {
  display: block;
  font-weight: 600;
  margin: 16px 0 6px;
  font-size: 13px;
}
input:not(.promo-input) {
  width: 100%;
  padding: 10px;
  font-size: 14px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  background: #f9fafb;
}
input:focus {
  outline: none;
  border-color: #4338ca;
  background: #fff;
}
#paypal-button-container {
  width: 100%;
  /* Added to make Paypal button full width like stripe */
}
#stripe-payment-request-button {
  width: 100%;
}
#card-element {
  border: 1px solid #cbd5e1;
  padding: 10px;
  border-radius: 6px;
  background: #f9fafb;
  margin-top: 6px;
  margin-bottom: 16px;
}
#payment-message {
  margin-top: 12px;
  text-align: center;
  font-size: 14px;
  display: none;
}
#payment-message.success {
  color: #16a34a;
  display: block;
}
#payment-message.error {
  color: #dc2626;
  display: block;
}
.pay-button {
  width: 100%;
  background: #c2d6f6;
  color: #ffffff;
  border: 1px solid #c2d6f6;
  padding: 12px;
  font-size: 15px;
  font-weight: 600;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}
.pay-button:hover {
  transform: translateY(-2px);
  background: #eef2ff;
}
input[type="text"],
input[type="email"],
input[type="number"] {
  height: 38px;
  padding: 6px 10px;
  font-size: 14px;
  box-sizing: border-box;
}
    @media (max-width: 768px) {
  .container {
    flex-direction: column;
  }
  .sidebar {
    width: 100%;
    border-left: none;
    border-top: 1px solid #e2e8f0;
  }
}

  </style>
</head>
<body>
  <div class="container">
    <div class="checkout">
      <h1>‚óü‚Äø ·•¥“ª·•±·•¥k·•Ü·•ôùóç</h1>

      <div id="payment-buttons" style="display: flex; gap: 12px; margin-bottom: 16px;">
        <div id="paypal-button-container"></div>
        <div id="stripe-payment-request-button"></div>
      </div>
      
      <div style="display: flex; align-items: center; text-align: center; margin: 16px 0; color: #475569; font-size: 13px;">
  <hr style="flex:1; border:none; border-top:1px solid #cbd5e1; margin:0;">
  <span style="padding:0 8px;">or</span>
  <hr style="flex:1; border:none; border-top:1px solid #cbd5e1; margin:0;">
</div>

      <label for="email">·•±‚Äîm·•≤—ñ·•£</label>
      <input type="email" id="email" placeholder="·•°·•Ü·•ô@·•±·•ä·•≤m‚ç¥·•£·•±.·•¥·•Üm" />

      <label for="name">ùñø·•ô·•£·•£ ·•£·•±g·•≤·•£ ·•í·•≤m·•±</label>
      <input type="text" id="name" placeholder="·•°·•Ü·•ôr ùñø·•ô·•£·•£ ·•í·•≤m·•±" />

      <label for="amount">·•≤m·•Ü·•ô·•íùóç</label>
      <input type="number" id="amount" placeholder="·•±.g. 20" min="1" step="0.01" />

      <label for="card-element">·•¥·•≤r·É´ ·É´·•±ùóç·•≤—ñ·•£s</label>
      <div id="card-element"></div>

      <form id="payment-form">
        <button type="submit" class="pay-button" disabled>·•¥·•Üm‚ç¥·•£·•±ùóç·•± ·•Ür·É´·•±r</button>
        <div id="payment-message"></div>
      </form>
    </div>

    <div class="sidebar">
      <img src="https://i.imgur.com/OYvWQPX.png" alt="Logo" class="logo" />
      <div class="product-name">/s·•ô·•ík—ñss·•±·É´ ·•¥·•Üms</div>
      <div class="product-desc">·•Ür·É´·•±r ùñør·•Üm m—ñ·•£ùóç·•Ü! ‚ç¥·•≤·•°—ñ·•íg ·•ï—ñùóç“ª ·•±·•ôr·•Ü? ‚ç¥·•≤·•° “ª·•±r·•±!</div>

      <div class="promo-section">
        <label for="promo">‚ç¥r·•Üm·•Ü ·•¥·•Ü·É´·•±</label>
        <input type="text" id="promo" placeholder="Enter promo code" />
        <button id="apply-promo">·•≤‚ç¥‚ç¥·•£·•°</button>
        <button id="remove-promo" style="display:none;">r·•±m·•Ü·•é·•±</button>
        <div class="promo-message" id="promo-message"></div>
      </div>

      <div class="tip-section">
        <label>ùóç—ñ‚ç¥ m·•± ·•¥:</label>
        <div class="tip-buttons">
          <button class="tip-btn" data-amount="0">·•í·•Ü ùóç—ñ‚ç¥</button>
          <button class="tip-btn" data-amount="2">+2 ‚Ç¨</button>
          <button class="tip-btn" data-amount="5">+5 ‚Ç¨</button>
          <button class="tip-btn" data-amount="10">+10 ‚Ç¨</button>
        </div>
      </div>

      <div class="total-price">ùóç·•Üùóç·•≤·•£ ·•Üùñø ·•Ür·É´·•±r: <span id="total-amount">0 ‚Ç¨</span></div>
    </div>
  </div>

  <script>
    const stripe = Stripe("pk_live_51RdZW2AuHLqKAXDNm5WqoLwAHcN5EnNCdSVaa4dnlV50mO0KCzsBGryv7djhbufEYbnO1kTKOz6dYGvEOJdSTv0M00WC9gEKO5");
    const elements = stripe.elements();
    const cardElement = elements.create("card");
    cardElement.mount("#card-element");

    const amountInput = document.getElementById("amount");
    const promoInput = document.getElementById("promo");
    const promoMessage = document.getElementById("promo-message");
    const totalAmount = document.getElementById("total-amount");
    const tipButtons = document.querySelectorAll(".tip-btn");
    const stripePaymentRequestButtonDiv = document.getElementById("stripe-payment-request-button");
    const payButton = document.querySelector('.pay-button');
    const paymentMessage = document.getElementById('payment-message');

    let promoPercentage = 0;
    let tipAmount = 0;

    // Calculate total amount including promo and tip
    function calculateTotal() {
      let amount = parseFloat(amountInput.value) || 0;
      let discount = amount * (promoPercentage / 100);
      let total = amount - discount + tipAmount;
      return total > 0 ? total.toFixed(2) : "0.00";
    }

    function updateTotalDisplay() {
      totalAmount.textContent = calculateTotal() + " ‚Ç¨";
    }

    // Promo code handling
    document.getElementById("apply-promo").addEventListener("click", () => {
      const code = promoInput.value.trim().toLowerCase();
      if (code === "sunkissed") {
        promoPercentage = 15;
        promoMessage.textContent = "Promo code applied! 15% discount.";
        promoMessage.style.color = "green";
        document.getElementById("apply-promo").style.display = "none";
        document.getElementById("remove-promo").style.display = "inline-block";
      } else {
        promoMessage.textContent = "Invalid promo code.";
        promoMessage.style.color = "red";
      }
      updateTotalDisplay();
    });

    document.getElementById("remove-promo").addEventListener("click", () => {
      promoPercentage = 0;
      promoInput.value = "";
      promoMessage.textContent = "";
      document.getElementById("apply-promo").style.display = "inline-block";
      document.getElementById("remove-promo").style.display = "none";
      updateTotalDisplay();
    });

    // Tip buttons handling
    tipButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        tipButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        tipAmount = parseFloat(btn.getAttribute("data-amount")) || 0;
        updateTotalDisplay();
      });
    });

    // Update total when amount input changes
    amountInput.addEventListener("input", updateTotalDisplay);

    // Initial total update
    updateTotalDisplay();

    // Disable pay button initially
    payButton.disabled = true;

    // Listen for card element changes to enable button if complete and valid
    cardElement.on('change', (event) => {
      if (event.complete) {
        payButton.disabled = false;
        paymentMessage.style.display = 'none';
        paymentMessage.textContent = '';
        paymentMessage.className = '';
      } else if (event.error) {
        payButton.disabled = true;
        paymentMessage.style.display = 'block';
        paymentMessage.textContent = event.error.message;
        paymentMessage.className = 'error';
      } else {
        payButton.disabled = true;
        paymentMessage.style.display = 'none';
        paymentMessage.textContent = '';
        paymentMessage.className = '';
      }
    });

    // Paypal button
    paypal.Buttons({
      style: {
        layout: 'vertical',
        color: 'gold',
        shape: 'rect',
        label: 'paypal',
        height: 40,
      },
      createOrder: function (data, actions) {
        const total = calculateTotal();
        return actions.order.create({
          purchase_units: [{
            amount: {
              currency_code: 'EUR',
              value: total
            }
          }]
        });
      },
      onApprove: function (data, actions) {
        return actions.order.capture().then(function (details) {
          alert('Transaction completed by ' + details.payer.name.given_name);
        });
      }
    }).render('#paypal-button-container');

    // Stripe Payment Request Button
const paymentRequest = stripe.paymentRequest({
  currency: 'eur',
  total: {
    label: 'Total',
    amount: Math.round(calculateTotal() * 100),
  },
  requestPayerName: true,
  requestPayerEmail: true,
});

    paymentRequest.on('paymentmethod', async (ev) => {
      const { paymentMethod, error } = await stripe.createPaymentMethod({
        type: 'card',
        card: cardElement,
        billing_details: {
          name: document.getElementById('name').value,
          email: document.getElementById('email').value
        }
      });

      if (error) {
        ev.complete('fail');
        paymentMessage.style.display = 'block';
        paymentMessage.textContent = error.message;
        paymentMessage.className = 'error';
      } else {
        ev.complete('success');
        // Process payment here...
        paymentMessage.style.display = 'block';
        paymentMessage.textContent = 'Payment successful!';
        paymentMessage.className = 'success';
      }
    });

    paymentRequest.canMakePayment().then(function (result) {
      if (result) {
        stripePaymentRequestButtonDiv.style.display = 'block';
        const prButton = elements.create('paymentRequestButton', {
          paymentRequest: paymentRequest,
        });
        prButton.mount('#stripe-payment-request-button');
      } else {
        stripePaymentRequestButtonDiv.style.display = 'none';
      }
    });

    // Form submission
    document.getElementById("payment-form").addEventListener("submit", async (e) => {
      e.preventDefault();

      // You can add more validations here for name, email, and amount if you want

      payButton.disabled = true;
      paymentMessage.style.display = 'none';
      paymentMessage.textContent = '';

      const { error, paymentMethod } = await stripe.createPaymentMethod({
        type: 'card',
        card: cardElement,
        billing_details: {
          name: document.getElementById('name').value,
          email: document.getElementById('email').value,
        },
      });

      if (error) {
        paymentMessage.style.display = 'block';
        paymentMessage.textContent = error.message;
        paymentMessage.className = 'error';
        payButton.disabled = false;
      } else {
        // Process paymentMethod.id on your backend here (not included in this frontend code)
        paymentMessage.style.display = 'block';
        paymentMessage.textContent = 'Payment method created successfully.';
        paymentMessage.className = 'success';
        payButton.disabled = false;
      }
    });
  </script>
</body>
</html>
